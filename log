New Ludum Dare.

Old broken landscape generator.

Am trying for debugging to change the colours of the triangles.
This is a test to see if the triangles have the proper orientation.
Each will have corners with colours red, green, blue.  All the up triangles in the map should have these colurs in the same orientationm and similarly all the down triangles.  Where the up triangles and the down triangles meet, they should have the same colours but running in the opposite direction; e.g, along the edge of the up triagle going from red to green, the sme edge in the down triangle should go from green to red.

Put in code to do this, and now everything is black.  I got it wrong.

I am following
    simple_model_render_03.js
on the tutorial
    http://learnwebgl.brown37.net/rendering/render_example_03.html

just noticed convention.
Shader attributes have names starting with "a_".
Shader unifirms have names starting with "u_".
This seems to be uniform across different opengl and webgl tutorials.
I think it may be just a coding convention to keep the progrmmer sane.
However, my shader used a uniform instead of an attribute, but the javascript code now uses an attribute.

Giving up on uniformly interpolated colours.

Will rename triantle to trianglet and make new triangle that has trianglet colur its corners.

Sat Apr 18 10:16:59 EDT 2020:

Passed the orientation test.  Have to remember that subscripting a matrix in Javascript is done m[i][j], not m[i,j].

Now the location test.  Done by choosing colours for triabnges base on their array index.  There should be a uniform gradation of colours on the triangles on the diplay.

at Apr 18 10:46:45 EDT 2020

It passes the locatino test.
So what could be screwing up my rivers?

Answer:  The refinement isn't srewing up the revers.
But in the initial unrefined mapm there's one only river, and it's
entirely landlocked.  So it's no surprise that the refined river is also landlaocked and therefore looks impossible.

No, there's a real problem.  Under some circumstances, the 'other side' of a river along a side up triangle, when refined, gets the two sides of the refined river attached in quite differenc place, apparently shifted over horizontally by two triangles.

It's starting to look s if the coordinate system I have on a piece of paper is not the coordinate system the computer is using, jujdging from what the trace says it put on the map vs what those coordinates say on my piece of paper.

Yes, that's a problem.  It means that me checking the code against my visual understanding does not work.

Now:  Just what are teh real coordinates?


2020 04 19

Finally got that bug fixed!

Here's what was going on.

The the triangle refinement uses three coordinate systems:

The array indices into the arrays of large triangles.
The array indices into the arrays of new small triangles.
The actual screen coordinates.

Somehow, the coordinate transformation between the arrays of large triangles and the arrays of small triangles was wrong.  This didn't affect the raw displays of triangles on the screen, because the screen coordinates were still calculated correctly.  But when the function that mapped river banks from one side of the river (on one triangle) to the other side of the river (on another triangle), it used array indices to find the adjacent triangle.  And that was oftern the wrong triangle by screen coordinates.

Time for a break.
